# ğŸ“ GitHubå‘å¸ƒæ–‡ä»¶æ€»è§ˆ

## ğŸ“‹ ç›®å½•ç»“æ„

```
android-tv-app/
â”œâ”€â”€ .github/workflows/              # GitHub Actionså·¥ä½œæµ
â”‚   â”œâ”€â”€ build-and-release.yml       # è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒAPK
â”‚   â”œâ”€â”€ restore-keystore.yml        # å¯†é’¥åº“æ¢å¤å’Œæµ‹è¯•
â”‚   â””â”€â”€ auto-tag-release.yml        # è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾
â”‚
â”œâ”€â”€ app/                            # åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ keystore.properties         # å¯†é’¥åº“é…ç½®æ–‡ä»¶ï¼ˆæœ¬åœ°ï¼‰
â”‚   â”œâ”€â”€ build.gradle               # æ„å»ºé…ç½®ï¼ˆå«ç­¾åï¼‰
â”‚   â””â”€â”€ ...
â”‚
â”œâ”€â”€ version.properties              # ç‰ˆæœ¬å·é…ç½®
â”œâ”€â”€ upload-keystore.jks            # ç­¾åå¯†é’¥åº“ï¼ˆæœ¬åœ°ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ å‘å¸ƒè„šæœ¬/
â”‚   â”œâ”€â”€ release.sh                 # Linux/macOSå‘å¸ƒè„šæœ¬
â”‚   â””â”€â”€ release.bat                # Windowså‘å¸ƒè„šæœ¬
â”‚
â”œâ”€â”€ é…ç½®/
â”‚   â”œâ”€â”€ .gitignore                 # Gitå¿½ç•¥æ–‡ä»¶
â”‚   â””â”€â”€ keystore.properties        # å¯†é’¥åº“é…ç½®æ¨¡æ¿
â”‚
â””â”€â”€ æ–‡æ¡£/
    â”œâ”€â”€ README-GitHubå‘å¸ƒ.md         # GitHubå‘å¸ƒè¯´æ˜
    â”œâ”€â”€ GitHubè‡ªåŠ¨å‘å¸ƒè¯´æ˜.md        # è‡ªåŠ¨å‘å¸ƒæŒ‡å—
    â”œâ”€â”€ GitHubå‘å¸ƒæŒ‡å—.md           # å®Œæ•´å‘å¸ƒæ‰‹å†Œ
    â””â”€â”€ GitHubå‘å¸ƒæ–‡ä»¶æ€»è§ˆ.md        # æœ¬æ–‡ä»¶
```

---

## ğŸ”§ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### 1ï¸âƒ£ GitHub Actionså·¥ä½œæµ

#### build-and-release.yml
**ä½œç”¨**: è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒAPKåˆ°GitHub Releases

**è§¦å‘æ¡ä»¶**:
- æ¨é€ç‰ˆæœ¬æ ‡ç­¾ (å¦‚ v1.0.0)
- æ‰‹åŠ¨è§¦å‘

**ä¸»è¦åŠŸèƒ½**:
- è®¾ç½®JDKå’ŒAndroid SDK
- ç¼“å­˜Gradleä¾èµ–
- æ„å»ºReleaseå’ŒDebug APK
- åˆ›å»ºGitHub Release
- ä¸Šä¼ APKæ–‡ä»¶åˆ°Release

**è¾“å‡º**:
- `app-release.apk` - å·²ç­¾åå‘å¸ƒç‰ˆ
- `app-debug.apk` - è°ƒè¯•ç‰ˆ

#### restore-keystore.yml
**ä½œç”¨**: æ¢å¤å¯†é’¥åº“æ–‡ä»¶å¹¶æµ‹è¯•æ„å»º

**è§¦å‘æ¡ä»¶**: æ‰‹åŠ¨è§¦å‘

**ä¸»è¦åŠŸèƒ½**:
- ä»GitHub Secretsæ¢å¤å¯†é’¥åº“
- åˆ›å»ºkeystore.propertiesé…ç½®
- éªŒè¯å¯†é’¥åº“æœ‰æ•ˆæ€§
- æµ‹è¯•æ„å»ºè¿‡ç¨‹

**ç”¨é€”**: è°ƒè¯•å¯†é’¥åº“é…ç½®é—®é¢˜

#### auto-tag-release.yml
**ä½œç”¨**: è‡ªåŠ¨åˆ›å»ºç‰ˆæœ¬æ ‡ç­¾

**è§¦å‘æ¡ä»¶**: æ¨é€åˆ°mainåˆ†æ”¯ä¸”æäº¤ä¿¡æ¯ä¸º"Release version"

**ä¸»è¦åŠŸèƒ½**:
- ä»build.gradleæå–ç‰ˆæœ¬å·
- è‡ªåŠ¨åˆ›å»ºGitæ ‡ç­¾
- è§¦å‘æ„å»ºæµç¨‹

**ç”¨é€”**: ç®€åŒ–å‘å¸ƒæµç¨‹

---

### 2ï¸âƒ£ é…ç½®æ–‡ä»¶

#### version.properties
**ä½œç”¨**: ç»Ÿä¸€ç®¡ç†ç‰ˆæœ¬å·

**æ ¼å¼**:
```properties
VERSION_NAME=1.0.0
VERSION_CODE=1
```

**ä½¿ç”¨åœºæ™¯**:
- å‘å¸ƒå‰æ›´æ–°ç‰ˆæœ¬å·
- è‡ªåŠ¨é€’å¢ç‰ˆæœ¬ä»£ç 
- CI/CDè¯»å–ç‰ˆæœ¬ä¿¡æ¯

#### keystore.properties
**ä½œç”¨**: å¯†é’¥åº“é…ç½®

**æ ¼å¼**:
```properties
storeFile=../upload-keystore.jks
storePassword=YOUR_STORE_PASSWORD
keyAlias=upload
keyPassword=YOUR_KEY_PASSWORD
```

**æ³¨æ„**:
- ä¸æäº¤åˆ°GitHub
- ä»…æœ¬åœ°ä½¿ç”¨
- ç”Ÿäº§ç¯å¢ƒé€šè¿‡Secretsç®¡ç†

#### .gitignore
**ä½œç”¨**: æŒ‡å®šGitå¿½ç•¥çš„æ–‡ä»¶å’Œç›®å½•

**å…³é”®æ¡ç›®**:
```gitignore
# å¯†é’¥åº“æ–‡ä»¶
*.jks
*.keystore

# é…ç½®æ–‡ä»¶
keystore.properties
version.properties

# æ„å»ºè¾“å‡º
*.apk
build/
.gradle/
```

---

### 3ï¸âƒ£ å‘å¸ƒè„šæœ¬

#### release.sh (Linux/macOS)
**ä½œç”¨**: è‡ªåŠ¨åŒ–å‘å¸ƒæµç¨‹

**åŠŸèƒ½**:
- éªŒè¯ç‰ˆæœ¬å·æ ¼å¼
- æ£€æŸ¥å¯†é’¥åº“
- æ›´æ–°ç‰ˆæœ¬å·
- æ„å»ºæµ‹è¯•
- Gitæäº¤å’Œæ¨é€
- åˆ›å»ºæ ‡ç­¾

**ä½¿ç”¨æ–¹æ³•**:
```bash
chmod +x release.sh
./release.sh 1.0.0
```

#### release.bat (Windows)
**ä½œç”¨**: Windowsç‰ˆå‘å¸ƒè„šæœ¬

**åŠŸèƒ½**: åŒrelease.sh

**ä½¿ç”¨æ–¹æ³•**:
```cmd
release.bat 1.0.0
```

---

### 4ï¸âƒ£ å¯†é’¥åº“æ–‡ä»¶

#### upload-keystore.jks
**ä½œç”¨**: Androidåº”ç”¨ç­¾åå¯†é’¥åº“

**ç”Ÿæˆå‘½ä»¤**:
```bash
keytool -genkey -v -keystore upload-keystore.jks \
  -keyalg RSA -keysize 2048 -validity 10000 -alias upload
```

**å®‰å…¨è¦æ±‚**:
- å¼ºå¯†ç ä¿æŠ¤
- å®‰å…¨å­˜å‚¨
- å¤‡ä»½åˆ°å®‰å…¨ä½ç½®
- ä¸ä¸Šä¼ åˆ°GitHub

---

## ğŸ“š æ–‡æ¡£ä½“ç³»

### 1ï¸âƒ£ å¿«é€Ÿå…¥é—¨

#### README-GitHubå‘å¸ƒ.md
**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…
**å†…å®¹**: 30ç§’å¿«é€Ÿå‘å¸ƒæŒ‡å—
**åŒ…å«**:
- å¿«é€Ÿå¯¼èˆª
- 30ç§’å‘å¸ƒæ­¥éª¤
- å‘å¸ƒç‰ˆæœ¬ç±»å‹
- è‡ªåŠ¨å‘å¸ƒæµç¨‹

### 2ï¸âƒ£ è¯¦ç»†æŒ‡å—

#### GitHubè‡ªåŠ¨å‘å¸ƒè¯´æ˜.md
**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…
**å†…å®¹**: è‡ªåŠ¨å‘å¸ƒç³»ç»Ÿè¯¦ç»†è¯´æ˜
**åŒ…å«**:
- ç¯å¢ƒé…ç½®
- GitHub Secretsè®¾ç½®
- å·¥ä½œæµç¨‹è¯´æ˜
- æ•…éšœæ’é™¤

#### GitHubå‘å¸ƒæŒ‡å—.md
**ç›®æ ‡ç”¨æˆ·**: å¼€å‘è€…/ç»´æŠ¤è€…
**å†…å®¹**: å®Œæ•´çš„å‘å¸ƒæµç¨‹æ‰‹å†Œ
**åŒ…å«**:
- ç¯å¢ƒå‡†å¤‡
- é…ç½®ç­¾åå¯†é’¥
- GitHub Actionsè®¾ç½®
- æ‰‹åŠ¨å‘å¸ƒæ­¥éª¤
- å®‰å…¨é…ç½®
- æœ€ä½³å®è·µ

### 3ï¸âƒ£ å‚è€ƒæ–‡æ¡£

#### GitHubå‘å¸ƒæ–‡ä»¶æ€»è§ˆ.md
**ç›®æ ‡ç”¨æˆ·**: æ‰€æœ‰ç”¨æˆ·
**å†…å®¹**: æ–‡ä»¶æ€»è§ˆå’Œç´¢å¼•
**åŒ…å«**:
- æ–‡ä»¶ç»“æ„è¯´æ˜
- æ¯ä¸ªæ–‡ä»¶çš„ä½œç”¨
- æ–‡æ¡£å…³è”å…³ç³»
- å¿«é€Ÿç´¢å¼•

---

## ğŸ”„ å‘å¸ƒæµç¨‹å›¾

```mermaid
graph TD
    A[å¼€å§‹å‘å¸ƒ] --> B[é€‰æ‹©å‘å¸ƒæ–¹å¼]

    B --> C[ä½¿ç”¨å‘å¸ƒè„šæœ¬]
    B --> D[æ‰‹åŠ¨åˆ›å»ºæ ‡ç­¾]
    B --> E[GitHubç•Œé¢è§¦å‘]

    C --> F[è‡ªåŠ¨æ‰§è¡Œ]
    D --> G[æ¨é€æ ‡ç­¾]
    E --> H[æ‰‹åŠ¨è§¦å‘]

    F --> I[GitHub Actionså¯åŠ¨]
    G --> I
    H --> I

    I --> J[æ¢å¤å¯†é’¥åº“]
    J --> K[æ„å»ºAPK]
    K --> L{æ„å»ºæˆåŠŸ?}

    L -->|æ˜¯| M[åˆ›å»ºRelease]
    L -->|å¦| N[æŸ¥çœ‹æ—¥å¿—]
    N --> O[ä¿®å¤é—®é¢˜]
    O --> I

    M --> P[ä¸Šä¼ APK]
    P --> Q[å‘å¸ƒå®Œæˆ]
    Q --> R[ç”¨æˆ·ä¸‹è½½]
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: é¦–æ¬¡è®¾ç½®

**æ­¥éª¤**:
1. é˜…è¯» `GitHubå‘å¸ƒæŒ‡å—.md`
2. ç”Ÿæˆå¯†é’¥åº“
3. é…ç½®GitHub Secrets
4. æµ‹è¯•å·¥ä½œæµ

**ç›¸å…³æ–‡ä»¶**:
- `GitHubå‘å¸ƒæŒ‡å—.md`
- `keystore.properties`
- `restore-keystore.yml`

### åœºæ™¯2: æ—¥å¸¸å‘å¸ƒ

**æ­¥éª¤**:
1. è¿è¡Œå‘å¸ƒè„šæœ¬
2. ç›‘æ§æ„å»ºçŠ¶æ€
3. ä¸‹è½½APKæ–‡ä»¶

**ç›¸å…³æ–‡ä»¶**:
- `release.sh` / `release.bat`
- `build-and-release.yml`
- `version.properties`

### åœºæ™¯3: é—®é¢˜æ’æŸ¥

**æ­¥éª¤**:
1. æŸ¥çœ‹æ„å»ºæ—¥å¿—
2. æ£€æŸ¥Secretsé…ç½®
3. æµ‹è¯•å¯†é’¥åº“

**ç›¸å…³æ–‡ä»¶**:
- `GitHubè‡ªåŠ¨å‘å¸ƒè¯´æ˜.md` (æ•…éšœæ’é™¤éƒ¨åˆ†)
- `restore-keystore.yml`

---

## ğŸ“Š æ–‡ä»¶ç»Ÿè®¡

### é…ç½®æ–‡ä»¶

| ç±»å‹ | æ•°é‡ | ä½ç½® |
|------|------|------|
| GitHub Actionså·¥ä½œæµ | 3 | `.github/workflows/` |
| æ„å»ºé…ç½® | 2 | `app/build.gradle`, `version.properties` |
| å¯†é’¥åº“é…ç½® | 2 | `upload-keystore.jks`, `keystore.properties` |
| å‘å¸ƒè„šæœ¬ | 2 | `release.sh`, `release.bat` |
| å¿½ç•¥æ–‡ä»¶ | 1 | `.gitignore` |

### æ–‡æ¡£æ–‡ä»¶

| æ–‡æ¡£ | ç”¨é€” | é•¿åº¦ |
|------|------|------|
| README-GitHubå‘å¸ƒ.md | å¿«é€Ÿå…¥é—¨ | ä¸­ |
| GitHubè‡ªåŠ¨å‘å¸ƒè¯´æ˜.md | è‡ªåŠ¨å‘å¸ƒ | é•¿ |
| GitHubå‘å¸ƒæŒ‡å—.md | å®Œæ•´æ‰‹å†Œ | è¶…é•¿ |
| GitHubå‘å¸ƒæ–‡ä»¶æ€»è§ˆ.md | æ–‡ä»¶ç´¢å¼• | ä¸­ |

---

## ğŸ” å¿«é€Ÿç´¢å¼•

### éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹é¢‘ç‡ | ç›®çš„ |
|------|----------|------|
| `version.properties` | æ¯æ¬¡å‘å¸ƒ | æ›´æ–°ç‰ˆæœ¬å· |
| `keystore.properties` | é¦–æ¬¡è®¾ç½® | é…ç½®å¯†é’¥åº“ |

### ä¸éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `.github/workflows/*.yml` | GitHub Actionsé…ç½® |
| `release.sh` / `release.bat` | å‘å¸ƒè„šæœ¬ |
| `.gitignore` | Gitå¿½ç•¥è§„åˆ™ |

### ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶

| æ–‡ä»¶ | ç”¨é€” | ä½ç½® |
|------|------|------|
| `app/build/outputs/apk/release/app-release.apk` | å‘å¸ƒç‰ˆAPK | ä¸´æ—¶æ„å»ºè¾“å‡º |
| `app/build/outputs/apk/debug/app-debug.apk` | è°ƒè¯•ç‰ˆAPK | ä¸´æ—¶æ„å»ºè¾“å‡º |

---

## ğŸ“ æ”¯æŒä¸å¸®åŠ©

### é—®é¢˜æ’æŸ¥é¡ºåº

1. **æŸ¥çœ‹æ„å»ºæ—¥å¿—**
   - GitHub Actions â†’ å·¥ä½œæµè¿è¡Œ â†’ æŸ¥çœ‹æ—¥å¿—

2. **æ£€æŸ¥é…ç½®æ–‡ä»¶**
   - GitHub Secretsæ˜¯å¦è®¾ç½®
   - å¯†é’¥åº“é…ç½®æ˜¯å¦æ­£ç¡®

3. **å‚è€ƒæ–‡æ¡£**
   - é˜…è¯»æ•…éšœæ’é™¤ç« èŠ‚
   - æŸ¥çœ‹ç¤ºä¾‹é…ç½®

4. **æµ‹è¯•å¯†é’¥åº“**
   - è¿è¡Œ `restore-keystore.yml`
   - æœ¬åœ°æµ‹è¯•æ„å»º

### å¸¸ç”¨å‘½ä»¤

```bash
# ç”Ÿæˆå¯†é’¥åº“
keytool -genkey -v -keystore upload-keystore.jks -keyalg RSA -keysize 2048 -validity 10000 -alias upload

# Base64ç¼–ç å¯†é’¥åº“
base64 -w 0 upload-keystore.jks

# æœ¬åœ°æ„å»ºæµ‹è¯•
./gradlew assembleRelease

# æŸ¥çœ‹æ ‡ç­¾
git tag -l

# åˆ›å»ºæ ‡ç­¾
git tag v1.0.0
```

---

## ğŸ‰ æœ€ä½³å®è·µ

### ç‰ˆæœ¬ç®¡ç†

1. **è¯­ä¹‰åŒ–ç‰ˆæœ¬å·**: ä½¿ç”¨ `x.y.z` æ ¼å¼
2. **é€’å¢ç‰ˆæœ¬ä»£ç **: æ¯æ¬¡å‘å¸ƒé€’å¢
3. **è§„èŒƒæäº¤ä¿¡æ¯**: "Release version x.y.z"

### å®‰å…¨

1. **å¯†é’¥åº“ä¿æŠ¤**: ä¸æäº¤åˆ°Git
2. **å¯†ç ç®¡ç†**: ä½¿ç”¨GitHub Secrets
3. **è®¿é—®æ§åˆ¶**: é™åˆ¶Secretsè®¿é—®æƒé™

### å‘å¸ƒæµç¨‹

1. **è‡ªåŠ¨åŒ–ä¼˜å…ˆ**: ä½¿ç”¨å‘å¸ƒè„šæœ¬
2. **æµ‹è¯•éªŒè¯**: æœ¬åœ°æ„å»ºæµ‹è¯•
3. **ç›‘æ§çŠ¶æ€**: å…³æ³¨æ„å»ºç»“æœ

---

**æœ€åæ›´æ–°**: 2025-12-17
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0

**ğŸ“Œ æç¤º**: é¦–æ¬¡ä½¿ç”¨è¯·ä» `GitHubå‘å¸ƒæŒ‡å—.md` å¼€å§‹é˜…è¯»ï¼